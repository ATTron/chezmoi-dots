#!/bin/bash
set -e

# Install dependencies
sudo apt-get update && sudo apt-get install -y curl git python3 python3-pip

# Install Ansible
pip3 install ansible

# Install Chezmoi and apply dotfiles
sh -c "$(curl -fsLS get.chezmoi.io)" -- init --apply git@github.com:ATTron/dotfiles.git

# Run Ansible playbook
cd ~/.local/share/chezmoi/ansible
ansible-playbook -i localhost, -c local setup.yml

echo "DevPod environment setup complete!"
